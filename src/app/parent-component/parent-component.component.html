<div class="parent-child-communication">
  <header class="demo-header">
    <h1>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Parent-Child Communication Demo</h1>
    <p>Learn different ways to communicate between parent and child components in Angular</p>
  </header>

  <div class="communication-container">
    <!-- Parent Section -->
    <section class="parent-section">
      <h2>ğŸ‘¨ Parent Component</h2>

      <!-- &#64;Input Communication Demo -->
      <div class="communication-card">
        <h3>ğŸ“¤ &#64;Input Communication (Parent â†’ Child)</h3>
        <p>Parent sends data to child using &#64;Input decorator</p>

        <div class="demo-content">
          <div class="controls">
            <button (click)="updateParentMessage()" class="btn btn-primary">
              Update Parent Message
            </button>
            <button (click)="updateParentData()" class="btn btn-success">
              Update Parent Data
            </button>
            <button (click)="addParentItem()" class="btn btn-info">
              Add Parent Item
            </button>
          </div>

          <div class="data-display">
            <h4>Parent Data Being Sent:</h4>
            <div class="data-item">
              <strong>Message:</strong> {{ parentMessage }}
            </div>
            <div class="data-item">
              <strong>Data Object:</strong> {{ parentData | json }}
            </div>
            <div class="data-item">
              <strong>Items Array:</strong> {{ parentItems.join(', ') }}
            </div>
          </div>
        </div>
      </div>

      <!-- &#64;Output Communication Demo -->
      <div class="communication-card">
        <h3>ğŸ“¥ &#64;Output Communication (Child â†’ Parent)</h3>
        <p>Child sends data to parent using &#64;Output decorator and EventEmitter</p>

        <div class="demo-content">
          <div class="controls">
            <button (click)="clearChildMessages()" class="btn btn-warning">
              Clear Messages
            </button>
            <button (click)="clearChildData()" class="btn btn-danger">
              Clear Data
            </button>
          </div>

          <div class="data-display">
            <h4>Messages from Child:</h4>
            <div class="messages-list">
              <div *ngFor="let message of childMessages; let i = index" class="message-item">
                <span class="message-index">{{ i + 1 }}.</span>
                <span class="message-text">{{ message }}</span>
              </div>
              <div *ngIf="childMessages.length === 0" class="empty-state">
                No messages from child yet
              </div>
            </div>

            <h4>Data from Child:</h4>
            <div class="data-list">
              <div *ngFor="let data of childData; let i = index" class="data-item">
                <div class="data-header">
                  <strong>Data {{ i + 1 }}:</strong>
                </div>
                <div class="data-content">
                  <div><strong>Timestamp:</strong> {{ data.timestamp | date:'medium' }}</div>
                  <div><strong>Counter:</strong> {{ data.counter }}</div>
                  <div><strong>Message:</strong> {{ data.message }}</div>
                </div>
              </div>
              <div *ngIf="childData.length === 0" class="empty-state">
                No data from child yet
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ViewChild Communication Demo -->
      <div class="communication-card">
        <h3>ğŸ” ViewChild Communication (Parent â†’ Child)</h3>
        <p>Parent accesses child component directly using ViewChild</p>

        <div class="demo-content">
          <div class="controls">
            <button (click)="callChildMethod()" class="btn btn-primary">
              Call Child Method
            </button>
            <button (click)="getChildProperty()" class="btn btn-success">
              Get Child Property
            </button>
          </div>

          <div class="data-display">
            <h4>ViewChild Results:</h4>
            <div class="data-item">
              <strong>Child Property:</strong> {{ viewChildMessage || 'Click "Get Child Property" to see' }}
            </div>
            <div class="info">
              ğŸ’¡ Check browser console to see child method execution logs
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Child Section -->
    <section class="child-section">
      <h2>ğŸ‘¶ Child Component</h2>

      <app-child-component
        [parentMessage]="parentMessage"
        [parentData]="parentData"
        [parentItems]="parentItems"
        (childMessageEvent)="onChildMessage($event)"
        (childDataEvent)="onChildData($event)">
      </app-child-component>
    </section>
  </div>

  <!-- Communication Patterns Summary -->
  <section class="summary-section">
    <h2>ğŸ“š Communication Patterns Summary</h2>
    <div class="patterns-grid">
      <div class="pattern-card">
        <h4>ğŸ“¤ &#64;Input</h4>
        <p><strong>Direction:</strong> Parent â†’ Child</p>
        <p><strong>Use Case:</strong> Pass data from parent to child</p>
        <p><strong>Syntax:</strong> <code>[property]="value"</code></p>
        <p><strong>Child Side:</strong> <code>&#64;Input() property</code></p>
      </div>

      <div class="pattern-card">
        <h4>ğŸ“¥ &#64;Output</h4>
        <p><strong>Direction:</strong> Child â†’ Parent</p>
        <p><strong>Use Case:</strong> Send events/data from child to parent</p>
        <p><strong>Syntax:</strong> <code>(event)="handler($event)"</code></p>
        <p><strong>Child Side:</strong> <code>&#64;Output() event = new EventEmitter()</code></p>
      </div>

      <div class="pattern-card">
        <h4>ğŸ” ViewChild</h4>
        <p><strong>Direction:</strong> Parent â†’ Child</p>
        <p><strong>Use Case:</strong> Access child methods/properties directly</p>
        <p><strong>Syntax:</strong> <code>&#64;ViewChild(ChildComponent)</code></p>
        <p><strong>Access:</strong> <code>this.childComponent.method()</code></p>
      </div>

      <div class="pattern-card">
        <h4>ğŸ”„ Service</h4>
        <p><strong>Direction:</strong> Any â†’ Any</p>
        <p><strong>Use Case:</strong> Share data between unrelated components</p>
        <p><strong>Syntax:</strong> <code>constructor(private service: DataService)</code></p>
        <p><strong>Access:</strong> <code>this.service.getData()</code></p>
      </div>
    </div>
  </section>
</div>
