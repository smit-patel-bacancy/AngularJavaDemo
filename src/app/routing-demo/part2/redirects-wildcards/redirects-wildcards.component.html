<div class="redirects-wildcards-container">
  <div class="section">
    <h2>Redirects & Wildcards</h2>
    <p class="intro">
      Learn how to implement route redirects and wildcard routes in Angular, including default routes, error handling, and advanced redirection patterns for better user experience.
    </p>
  </div>

  <div class="redirects-section">
    <h3>Route Redirects</h3>
    <div class="redirects-grid">
      <div class="redirect-card">
        <h4>Basic Redirects</h4>
        <div class="code-example">
          <pre><code>export const routes: Routes = [
  &#123; path: '', redirectTo: '/home', pathMatch: 'full' &#125;,
  &#123; path: 'home', component: HomeComponent &#125;,
  &#123; path: 'old-page', redirectTo: '/new-page', pathMatch: 'full' &#125;,
  &#123; path: 'new-page', component: NewPageComponent &#125;,
  &#123; path: 'legacy', redirectTo: '/modern', pathMatch: 'prefix' &#125;,
  &#123; path: 'modern', component: ModernComponent &#125;
];</code></pre>
        </div>
        <p>Redirect routes to different paths using redirectTo property.</p>
      </div>

      <div class="redirect-card">
        <h4>Path Matching Strategies</h4>
        <div class="code-example">
          <pre><code>export const routes: Routes = [
  // Full path match - only exact match
  &#123; path: 'admin', redirectTo: '/dashboard', pathMatch: 'full' &#125;,

  // Prefix path match - matches any path starting with
  &#123; path: 'legacy', redirectTo: '/modern', pathMatch: 'prefix' &#125;,

  // Examples:
  // /admin ‚Üí /dashboard (full match)
  // /legacy/users ‚Üí /modern/users (prefix match)
  // /legacy/settings ‚Üí /modern/settings (prefix match)
];</code></pre>
        </div>
        <p>Choose between full and prefix path matching for redirects.</p>
      </div>

      <div class="redirect-card">
        <h4>Conditional Redirects</h4>
        <div class="code-example">
          <pre><code>export const routes: Routes = [
  &#123; path: 'dashboard', component: DashboardComponent, canActivate: [AuthGuard] &#125;,
  &#123; path: 'login', component: LoginComponent &#125;,
  &#123; path: 'profile', redirectTo: '/dashboard', pathMatch: 'full' &#125;
];

// In AuthGuard
canActivate(route: ActivatedRouteSnapshot): boolean &#123;
  if (this.authService.isAuthenticated()) &#123;
    return true;
  &#125; else &#123;
    this.router.navigate(['/login']);
    return false;
  &#125;
&#125;</code></pre>
        </div>
        <p>Use guards to implement conditional redirects based on application state.</p>
      </div>
    </div>
  </div>

  <div class="wildcards-section">
    <h3>Wildcard Routes</h3>
    <div class="wildcards-grid">
      <div class="wildcard-card">
        <h4>Basic Wildcard Route</h4>
        <div class="code-example">
          <pre><code>export const routes: Routes = [
  &#123; path: 'home', component: HomeComponent &#125;,
  &#123; path: 'about', component: AboutComponent &#125;,
  &#123; path: 'contact', component: ContactComponent &#125;,
  &#123; path: '**', component: NotFoundComponent &#125;
];</code></pre>
        </div>
        <p>Use ** wildcard to catch all unmatched routes for 404 handling.</p>
      </div>

      <div class="wildcard-card">
        <h4>Wildcard with Redirect</h4>
        <div class="code-example">
          <pre><code>export const routes: Routes = [
  &#123; path: 'home', component: HomeComponent &#125;,
  &#123; path: 'products', component: ProductsComponent &#125;,
  &#123; path: '**', redirectTo: '/home', pathMatch: 'full' &#125;
];

// Alternative: redirect to 404 page
export const routes: Routes = [
  &#123; path: 'home', component: HomeComponent &#125;,
  &#123; path: 'products', component: ProductsComponent &#125;,
  &#123; path: '404', component: NotFoundComponent &#125;,
  &#123; path: '**', redirectTo: '/404', pathMatch: 'full' &#125;
];</code></pre>
        </div>
        <p>Redirect unmatched routes to a default page or 404 page.</p>
      </div>

      <div class="wildcard-card">
        <h4>Advanced Wildcard Patterns</h4>
        <div class="code-example">
          <pre><code>export const routes: Routes = [
  &#123; path: 'admin', component: AdminComponent, canActivate: [AuthGuard] &#125;,
  &#123; path: 'login', component: LoginComponent &#125;,
  &#123; path: '**', component: NotFoundComponent, data: &#123; title: 'Page Not Found' &#125; &#125;
];

// In NotFoundComponent
ngOnInit() &#123;
  const currentUrl = this.router.url;
  console.log('404 for URL:', currentUrl);

  // Log analytics or send to error tracking service
  this.analyticsService.track404(currentUrl);
&#125;</code></pre>
        </div>
        <p>Add analytics and error tracking to wildcard routes.</p>
      </div>
    </div>
  </div>

  <div class="advanced-patterns-section">
    <h3>Advanced Redirect Patterns</h3>
    <div class="patterns-grid">
      <div class="pattern-card">
        <h4>Dynamic Redirects</h4>
        <div class="code-example">
          <pre><code>export class DynamicRedirectGuard implements CanActivate &#123;
  constructor(private router: Router, private authService: AuthService) &#123;&#125;

  canActivate(route: ActivatedRouteSnapshot): boolean &#123;
    const user = this.authService.getCurrentUser();

    if (user.role === 'admin') &#123;
      this.router.navigate(['/admin/dashboard']);
    &#125; else if (user.role === 'user') &#123;
      this.router.navigate(['/user/profile']);
    &#125; else &#123;
      this.router.navigate(['/login']);
    &#125;

    return false; // Always redirect
  &#125;
&#125;

export const routes: Routes = [
  &#123; path: 'dashboard', component: DashboardComponent, canActivate: [DynamicRedirectGuard] &#125;
];</code></pre>
        </div>
        <p>Use guards to implement dynamic redirects based on user state.</p>
      </div>

      <div class="pattern-card">
        <h4>Source-Based Redirects</h4>
        <div class="code-example">
          <pre><code>export class SourceRedirectGuard implements CanActivate &#123;
  constructor(private router: Router) &#123;&#125;

  canActivate(route: ActivatedRouteSnapshot): boolean &#123;
    const source = route.queryParamMap.get('source');

    if (source === 'email') &#123;
      this.router.navigate(['/welcome/email']);
    &#125; else if (source === 'social') &#123;
      this.router.navigate(['/welcome/social']);
    &#125; else &#123;
      this.router.navigate(['/welcome/default']);
    &#125;

    return false;
  &#125;
&#125;</code></pre>
        </div>
        <p>Redirect based on query parameters or external sources.</p>
      </div>

      <div class="pattern-card">
        <h4>Lazy Loading Redirects</h4>
        <div class="code-example">
          <pre><code>export const routes: Routes = [
  &#123; path: 'admin', loadChildren: () => import('./admin/admin.module').then(m => m.AdminModule) &#125;,
  &#123; path: 'user', loadChildren: () => import('./user/user.module').then(m => m.UserModule) &#125;,
  &#123; path: '**', redirectTo: '/home', pathMatch: 'full' &#125;
];

// admin.module.ts
export const adminRoutes: Routes = [
  &#123; path: '', redirectTo: 'dashboard', pathMatch: 'full' &#125;,
  &#123; path: 'dashboard', component: DashboardComponent &#125;,
  &#123; path: '**', redirectTo: 'dashboard', pathMatch: 'full' &#125;
];</code></pre>
        </div>
        <p>Handle redirects within lazy-loaded feature modules.</p>
      </div>
    </div>
  </div>

  <div class="real-world-examples-section">
    <h3>Real-World Examples</h3>
    <div class="examples-grid">
      <div class="example-card">
        <h4>üõí E-commerce Site</h4>
        <div class="code-example">
          <pre><code>export const routes: Routes = [
  &#123; path: '', redirectTo: '/home', pathMatch: 'full' &#125;,
  &#123; path: 'home', component: HomeComponent &#125;,
  &#123; path: 'products', component: ProductsComponent &#125;,
  &#123; path: 'product/:id', component: ProductDetailComponent &#125;,
  &#123; path: 'cart', component: CartComponent, canActivate: [AuthGuard] &#125;,
  &#123; path: 'checkout', component: CheckoutComponent, canActivate: [AuthGuard] &#125;,
  &#123; path: 'login', component: LoginComponent &#125;,
  &#123; path: '404', component: NotFoundComponent &#125;,
  &#123; path: '**', redirectTo: '/404', pathMatch: 'full' &#125;
];</code></pre>
        </div>
        <p>E-commerce site with proper redirects and 404 handling.</p>
      </div>

      <div class="example-card">
        <h4>üìä Admin Dashboard</h4>
        <div class="code-example">
          <pre><code>export const routes: Routes = [
  &#123; path: '', redirectTo: '/dashboard', pathMatch: 'full' &#125;,
  &#123; path: 'dashboard', component: DashboardComponent, canActivate: [AuthGuard] &#125;,
  &#123; path: 'admin', loadChildren: () => import('./admin/admin.module').then(m => m.AdminModule) &#125;,
  &#123; path: 'login', component: LoginComponent &#125;,
  &#123; path: 'legacy', redirectTo: '/dashboard', pathMatch: 'prefix' &#125;,
  &#123; path: '**', component: NotFoundComponent &#125;
];</code></pre>
        </div>
        <p>Admin dashboard with legacy URL support and proper error handling.</p>
      </div>

      <div class="example-card">
        <h4>üìù Blog Platform</h4>
        <div class="code-example">
          <pre><code>export const routes: Routes = [
  &#123; path: '', redirectTo: '/blog', pathMatch: 'full' &#125;,
  &#123; path: 'blog', component: BlogComponent &#125;,
  &#123; path: 'post/:slug', component: PostComponent &#125;,
  &#123; path: 'author/:username', component: AuthorComponent &#125;,
  &#123; path: 'old-blog/:id', redirectTo: '/post/:id', pathMatch: 'full' &#125;,
  &#123; path: '404', component: NotFoundComponent &#125;,
  &#123; path: '**', redirectTo: '/404', pathMatch: 'full' &#125;
];</code></pre>
        </div>
        <p>Blog platform with legacy URL redirects and 404 handling.</p>
      </div>
    </div>
  </div>

  <div class="best-practices-section">
    <h3>Best Practices</h3>
    <div class="practices-list">
      <div class="practice-item">
        <h4>‚úÖ Always Include Wildcard Route</h4>
        <p>Always include a ** wildcard route to handle unmatched URLs gracefully.</p>
      </div>

      <div class="practice-item">
        <h4>‚úÖ Use Appropriate Path Matching</h4>
        <p>Choose 'full' for exact redirects and 'prefix' for hierarchical redirects.</p>
      </div>

      <div class="practice-item">
        <h4>‚úÖ Handle Legacy URLs</h4>
        <p>Provide redirects for old URLs to maintain SEO and user experience.</p>
      </div>

      <div class="practice-item">
        <h4>‚úÖ Add Analytics to 404 Pages</h4>
        <p>Track 404 errors to identify broken links and improve user experience.</p>
      </div>

      <div class="practice-item">
        <h4>‚úÖ Test Redirect Chains</h4>
        <p>Ensure redirect chains don't create infinite loops or unexpected behavior.</p>
      </div>
    </div>
  </div>

  <div class="common-patterns-section">
    <h3>Common Redirect & Wildcard Patterns</h3>
    <div class="patterns-grid">
      <div class="pattern-card">
        <h4>Default Route Pattern</h4>
        <div class="code-example">
          <pre><code>export const routes: Routes = [
  &#123; path: '', redirectTo: '/home', pathMatch: 'full' &#125;,
  &#123; path: 'home', component: HomeComponent &#125;,
  &#123; path: '**', component: NotFoundComponent &#125;
];</code></pre>
        </div>
        <p>Redirect empty path to home page with 404 handling.</p>
      </div>

      <div class="pattern-card">
        <h4>Legacy URL Pattern</h4>
        <div class="code-example">
          <pre><code>export const routes: Routes = [
  &#123; path: 'old-page', redirectTo: '/new-page', pathMatch: 'full' &#125;,
  &#123; path: 'legacy', redirectTo: '/modern', pathMatch: 'prefix' &#125;,
  &#123; path: 'new-page', component: NewPageComponent &#125;,
  &#123; path: 'modern', component: ModernComponent &#125;
];</code></pre>
        </div>
        <p>Handle legacy URLs with appropriate redirects.</p>
      </div>

      <div class="pattern-card">
        <h4>Error Handling Pattern</h4>
        <div class="code-example">
          <pre><code>export const routes: Routes = [
  &#123; path: 'home', component: HomeComponent &#125;,
  &#123; path: '404', component: NotFoundComponent &#125;,
  &#123; path: 'error', component: ErrorComponent &#125;,
  &#123; path: '**', redirectTo: '/404', pathMatch: 'full' &#125;
];</code></pre>
        </div>
        <p>Comprehensive error handling with dedicated error pages.</p>
      </div>
    </div>
  </div>
</div>
