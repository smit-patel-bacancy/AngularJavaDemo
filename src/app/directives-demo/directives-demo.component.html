<div class="directives-demo">
  <header class="demo-header">
    <h1>üéØ Angular Directives Tutorial</h1>
    <p>Learn Angular directives through interactive examples</p>
  </header>

  <!-- Structural Directives Section -->
  <section class="demo-section">
    <h2>üìã Structural Directives</h2>
    <p class="section-description">
      Structural directives change the DOM layout by adding and removing DOM elements.
    </p>

    <!-- *ngIf Demo - Newer Syntax -->
    <div class="demo-card">
      <h3>*ngIf Directive (Newer Syntax)</h3>
      <p>Conditionally renders elements using the newer &#64;if syntax (Angular 17+) and traditional *ngIf.</p>

      <div class="demo-content">
        <div class="controls">
          <button (click)="toggleContent()" class="btn btn-primary">
            {{ showContent ? 'Hide' : 'Show' }} Content
          </button>
        </div>

        <!-- Traditional *ngIf syntax -->
        <div class="demo-subsection">
          <h4>Traditional *ngIf Syntax:</h4>
          <div *ngIf="showContent" class="conditional-content">
            <p>üéâ This content is shown when showContent is true!</p>
            <p>Try clicking the button above to toggle this content.</p>
          </div>
        </div>

        <!-- Newer &#64;if syntax (Angular 17+) -->
        <div class="demo-subsection">
          <h4>Newer &#64;if Syntax (Angular 17+):</h4>
          @if (showContent) {
            <div class="conditional-content">
              <p>üöÄ This uses the newer &#64;if syntax!</p>
              <p>More readable and performant than *ngIf.</p>
            </div>
          } @else {
            <div class="conditional-content">
              <p>‚ùå Content is hidden using &#64;else block.</p>
            </div>
          }
        </div>

        <!-- Complex ngIf with else -->
        <div class="demo-subsection">
          <h4>Complex *ngIf with else:</h4>
          <div *ngIf="user.isActive; else inactiveUser" class="conditional-content">
            <p>‚úÖ User {{ user.name }} is active!</p>
          </div>
          <ng-template #inactiveUser>
            <div class="conditional-content">
              <p>‚ùå User {{ user.name }} is inactive.</p>
            </div>
          </ng-template>
        </div>
      </div>
    </div>

    <!-- *ngFor Demo - Enhanced with trackBy -->
    <div class="demo-card">
      <h3>*ngFor Directive (Enhanced with trackBy)</h3>
      <p>Repeats a template for each item in an array with optimized trackBy functions.</p>

      <div class="demo-content">
        <div class="controls">
          <button (click)="addItem()" class="btn btn-success">Add Simple Item</button>
          <button (click)="addUser()" class="btn btn-info">Add User</button>
          <button (click)="items = []; users = []" class="btn btn-warning">Clear All</button>
        </div>

        <!-- Simple array with trackBy -->
        <div class="demo-subsection">
          <h4>Simple Array with trackBy:</h4>
          <ul class="items-list">
            <li *ngFor="let item of items; trackBy: trackByFn; let i = index" class="item">
              <span class="item-text">{{ i + 1 }}. {{ item }}</span>
              <button (click)="removeItem(i)" class="btn btn-danger btn-sm">Remove</button>
            </li>
          </ul>
        </div>

        <!-- Object array with enhanced trackBy -->
        <div class="demo-subsection">
          <h4>Object Array with Enhanced trackBy:</h4>
          <div class="users-grid">
            <div *ngFor="let user of users; trackBy: trackByUserId; let i = index" class="user-card">
              <div class="user-info">
                <h5>{{ user.name }}</h5>
                <p><strong>ID:</strong> {{ user.id }}</p>
                <p><strong>Age:</strong> {{ user.age }}</p>
                <p><strong>Role:</strong> {{ user.role }}</p>
              </div>
              <div class="user-actions">
                <button (click)="updateUserRole(user.id)" class="btn btn-primary btn-sm">
                  Change Role
                </button>
                <button (click)="removeUser(user.id)" class="btn btn-danger btn-sm">
                  Remove
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Newer &#64;for syntax (Angular 17+) -->
        <div class="demo-subsection">
          <h4>Newer &#64;for Syntax (Angular 17+):</h4>
          <div class="users-grid">
            @for (user of users; track user.id; let i = $index) {
              <div class="user-card">
                <div class="user-info">
                  <h5>{{ user.name }}</h5>
                  <p><strong>Index:</strong> {{ i }}</p>
                  <p><strong>Role:</strong> {{ user.role }}</p>
                </div>
              </div>
            } @empty {
              <div class="empty-state">
                <p>No users found. Add some users to see them here!</p>
              </div>
            }
          </div>
        </div>

        <p class="info">üí° Notice how trackBy optimizes performance by tracking items by their unique identifiers!</p>
      </div>
    </div>

    <!-- *ngSwitch Demo - Enhanced -->
    <div class="demo-card">
      <h3>*ngSwitch Directive (Enhanced)</h3>
      <p>Displays one element from a set of choices based on a switch expression.</p>

      <div class="demo-content">
        <!-- Traditional ngSwitch -->
        <div class="demo-subsection">
          <h4>Traditional *ngSwitch Syntax:</h4>
          <div class="switch-controls">
            <label>Select a fruit:</label>
            <select [(ngModel)]="selectedItem" class="form-control">
              <option value="">Choose...</option>
              <option value="apple">Apple</option>
              <option value="banana">Banana</option>
              <option value="orange">Orange</option>
              <option value="mango">Mango</option>
            </select>
          </div>

          <div [ngSwitch]="selectedItem" class="switch-result">
            <p *ngSwitchCase="'apple'" class="switch-case apple">üçé Apple - Sweet and crunchy!</p>
            <p *ngSwitchCase="'banana'" class="switch-case banana">üçå Banana - Rich in potassium!</p>
            <p *ngSwitchCase="'orange'" class="switch-case orange">üçä Orange - Full of vitamin C!</p>
            <p *ngSwitchCase="'mango'" class="switch-case mango">ü•≠ Mango - The king of fruits!</p>
            <p *ngSwitchDefault class="switch-default">Please select a fruit from the dropdown above.</p>
          </div>
        </div>

        <!-- Enhanced ngSwitch with view modes -->
        <div class="demo-subsection">
          <h4>Enhanced *ngSwitch with View Modes:</h4>
          <div class="switch-controls">
            <label>Select view mode:</label>
            <div class="view-buttons">
              @for (option of switchOptions; track option) {
                <button
                  (click)="changeView(option)"
                  [class.active]="currentView === option"
                  class="btn btn-outline-primary">
                  {{ option | titlecase }}
                </button>
              }
            </div>
          </div>

          <div [ngSwitch]="currentView" class="switch-result">
            <div *ngSwitchCase="'list'" class="switch-case list-view">
              <h5>üìã List View</h5>
              <ul>
                @for (user of users; track user.id) {
                  <li>{{ user.name }} - {{ user.role }}</li>
                }
              </ul>
            </div>
            <div *ngSwitchCase="'grid'" class="switch-case grid-view">
              <h5>üî≤ Grid View</h5>
              <div class="grid-layout">
                @for (user of users; track user.id) {
                  <div class="grid-item">{{ user.name }}</div>
                }
              </div>
            </div>
            <div *ngSwitchCase="'table'" class="switch-case table-view">
              <h5>üìä Table View</h5>
              <table class="table">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Age</th>
                    <th>Role</th>
                  </tr>
                </thead>
                <tbody>
                  @for (user of users; track user.id) {
                    <tr>
                      <td>{{ user.name }}</td>
                      <td>{{ user.age }}</td>
                      <td>{{ user.role }}</td>
                    </tr>
                  }
                </tbody>
              </table>
            </div>
            <div *ngSwitchCase="'cards'" class="switch-case cards-view">
              <h5>üÉè Cards View</h5>
              <div class="cards-layout">
                @for (user of users; track user.id) {
                  <div class="card">
                    <div class="card-body">
                      <h6>{{ user.name }}</h6>
                      <p>{{ user.role }}</p>
                    </div>
                  </div>
                }
              </div>
            </div>
            <div *ngSwitchDefault class="switch-default">
              <p>Please select a view mode from the buttons above.</p>
            </div>
          </div>
        </div>

        <!-- Newer &#64;switch syntax (Angular 17+) -->
        <div class="demo-subsection">
          <h4>Newer &#64;switch Syntax (Angular 17+):</h4>
          @switch (currentView) {
            @case ('list') {
              <div class="switch-case list-view">
                <h5>üìã List View (New Syntax)</h5>
                <p>This uses the newer &#64;switch syntax!</p>
              </div>
            }
            @case ('grid') {
              <div class="switch-case grid-view">
                <h5>üî≤ Grid View (New Syntax)</h5>
                <p>This uses the newer &#64;switch syntax!</p>
              </div>
            }
            @case ('table') {
              <div class="switch-case table-view">
                <h5>üìä Table View (New Syntax)</h5>
                <p>This uses the newer &#64;switch syntax!</p>
              </div>
            }
            @case ('cards') {
              <div class="switch-case cards-view">
                <h5>üÉè Cards View (New Syntax)</h5>
                <p>This uses the newer &#64;switch syntax!</p>
              </div>
            }
            @default {
              <div class="switch-default">
                <p>Default case using newer &#64;switch syntax!</p>
              </div>
            }
          }
        </div>
      </div>
    </div>
  </section>

  <!-- Attribute Directives Section -->
  <section class="demo-section">
    <h2>üé® Attribute Directives</h2>
    <p class="section-description">
      Attribute directives change the appearance or behavior of an element.
    </p>

    <!-- ngClass Demo -->
    <div class="demo-card">
      <h3>ngClass Directive</h3>
      <p>Dynamically adds and removes CSS classes.</p>

      <div class="demo-content">
        <div class="controls">
          <button (click)="toggleActive()" class="btn btn-primary">
            Toggle Active Class
          </button>
          <button (click)="toggleDisabled()" class="btn btn-secondary">
            Toggle Disabled Class
          </button>
        </div>

        <div [ngClass]="{
            'active': isActive,
            'disabled': isDisabled,
            'demo-element': true
          }" class="ngclass-demo">
          <p>This element's classes change based on the buttons above!</p>
          <p>Current classes: {{ isActive ? 'active ' : '' }}{{ isDisabled ? 'disabled' : '' }}</p>
        </div>
      </div>
    </div>

    <!-- ngStyle Demo -->
    <div class="demo-card">
      <h3>ngStyle Directive</h3>
      <p>Dynamically sets inline styles on an element.</p>

      <div class="demo-content">
        <div class="controls">
          <button (click)="increaseFontSize()" class="btn btn-success">Increase Font</button>
          <button (click)="decreaseFontSize()" class="btn btn-warning">Decrease Font</button>
          <button (click)="changeTextColor('red')" class="btn btn-danger">Red Text</button>
          <button (click)="changeTextColor('blue')" class="btn btn-primary">Blue Text</button>
          <button (click)="changeTextColor('green')" class="btn btn-success">Green Text</button>
        </div>

        <p [ngStyle]="{
            'font-size': fontSize + 'px',
            'color': textColor,
            'font-weight': 'bold'
          }" class="ngstyle-demo">
          This text's style changes dynamically! (Font size: {{ fontSize }}px, Color: {{ textColor }})
        </p>
      </div>
    </div>

    <!-- Custom Directive Demo -->
    <div class="demo-card">
      <h3>Custom Directive (appHighlight)</h3>
      <p>Custom directive that highlights elements on mouse hover.</p>

      <div class="demo-content">
        <div class="highlight-demo">
          <p appHighlight class="highlight-element">
            üñ±Ô∏è Hover over me to see the highlight effect!
          </p>
          <p appHighlight class="highlight-element">
            üéØ Try hovering over this element too!
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Summary Section -->
  <section class="demo-section">
    <h2>üìö Summary</h2>
    <div class="summary-grid">
      <div class="summary-card">
        <h4>Structural Directives</h4>
        <ul>
          <li><code>*ngIf</code> / <code>&#64;if</code> - Conditional rendering (show/hide elements based on conditions)</li>
          <li><code>*ngFor</code> / <code>&#64;for</code> - List rendering with <strong>trackBy</strong> for performance and unique keys</li>
          <li><code>*ngSwitch</code> / <code>&#64;switch</code> - Multiple choice rendering (display one of many templates)</li>
        </ul>
      </div>

      <div class="summary-card">
        <h4>Attribute Directives</h4>
        <ul>
          <li><code>ngClass</code> - Dynamic CSS classes</li>
          <li><code>ngStyle</code> - Dynamic inline styles</li>
          <li><code>ngModel</code> - Two-way data binding</li>
        </ul>
      </div>

      <div class="summary-card">
        <h4>Performance & Best Practices</h4>
        <ul>
          <li>Always use <code>trackBy</code> with <code>*ngFor</code> or <code>&#64;for</code> to avoid duplicate key errors and improve rendering performance</li>
          <li>Ensure <strong>unique keys</strong> for all items in a collection (e.g., use a unique <code>id</code> property)</li>
          <li>Prefer modern syntax: <code>&#64;if</code>, <code>&#64;for</code>, <code>&#64;switch</code> for cleaner and more efficient templates (Angular 17+)</li>
          <li>Use <code>OnPush</code> change detection for better performance in large lists</li>
          <li>Handle edge cases (like empty arrays) to prevent runtime errors</li>
        </ul>
      </div>
    </div>
  </section>
</div>
