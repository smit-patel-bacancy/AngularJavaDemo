<div class="template-driven-forms">
  <div class="container">
    <h1>Template Driven Forms in Angular</h1>

    <!-- 1. Why do we need Angular's help for forms? -->
    <section class="section">
      <h2>1. Why Angular Forms?</h2>
      <div class="info-box">
        <p><strong>Angular forms provide:</strong></p>
        <ul>
          <li>Automatic form validation</li>
          <li>Form state tracking (dirty, pristine, touched, etc.)</li>
          <li>Easy data binding</li>
          <li>Built-in security features</li>
          <li>Consistent form handling across browsers</li>
        </ul>
      </div>
    </section>

    <!-- 2. Two approaches -->
    <section class="section">
      <h2>2. Two Approaches to Forms</h2>
      <div class="approaches">
        <div class="approach">
          <h3>Template-Driven Forms</h3>
          <ul>
            <li>Forms are created in the template</li>
            <li>Uses directives like ngModel, ngForm</li>
            <li>Simpler for basic forms</li>
            <li>Less code in component</li>
          </ul>
        </div>
        <div class="approach">
          <h3>Reactive Forms</h3>
          <ul>
            <li>Forms are created programmatically</li>
            <li>More control and flexibility</li>
            <li>Better for complex forms</li>
            <li>More code in component</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- 3-14. Main Form Demo -->
    <section class="section">
      <h2>3-14. Template Driven Forms Demo</h2>

      <!-- Form Controls Demo -->
      <div class="form-demo">
        <h3>User Registration Form</h3>

        <!-- 3. Creating Form and registering controls -->
        <form #userForm="ngForm" (ngSubmit)="onSubmit()" class="user-form">

          <!-- Basic Form Controls -->
          <div class="form-section">
            <h4>Basic Information</h4>

            <!-- 9. NgModel - set default and two way binding -->
            <div class="form-group">
              <label for="firstName">First Name *</label>
              <input
                type="text"
                id="firstName"
                name="firstName"
                [(ngModel)]="user.firstName"
                required
                minlength="2"
                #firstName="ngModel"
                class="form-control"
                [class.is-invalid]="hasError('firstName')"
                [class.is-valid]="isValid('firstName')"
              >
              <div class="invalid-feedback" *ngIf="hasError('firstName')">
                {{ getErrorMessage('firstName') }}
              </div>
            </div>

            <div class="form-group">
              <label for="lastName">Last Name *</label>
              <input
                type="text"
                id="lastName"
                name="lastName"
                [(ngModel)]="user.lastName"
                required
                minlength="2"
                #lastName="ngModel"
                class="form-control"
                [class.is-invalid]="hasError('lastName')"
                [class.is-valid]="isValid('lastName')"
              >
              <div class="invalid-feedback" *ngIf="hasError('lastName')">
                {{ getErrorMessage('lastName') }}
              </div>
            </div>

            <div class="form-group">
              <label for="email">Email *</label>
              <input
                type="email"
                id="email"
                name="email"
                [(ngModel)]="user.email"
                required
                email
                #email="ngModel"
                class="form-control"
                [class.is-invalid]="hasError('email')"
                [class.is-valid]="isValid('email')"
              >
              <div class="invalid-feedback" *ngIf="hasError('email')">
                {{ getErrorMessage('email') }}
              </div>
            </div>

            <div class="form-group">
              <label for="phone">Phone Number</label>
              <input
                type="tel"
                id="phone"
                name="phone"
                [(ngModel)]="user.phone"
                pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}"
                placeholder="123-456-7890"
                #phone="ngModel"
                class="form-control"
                [class.is-invalid]="hasError('phone')"
                [class.is-valid]="isValid('phone')"
              >
              <div class="invalid-feedback" *ngIf="hasError('phone')">
                {{ getErrorMessage('phone') }}
              </div>
            </div>
          </div>

          <!-- 11. Handling Radio Buttons -->
          <div class="form-section">
            <h4>Gender Selection</h4>
            <div class="form-group">
              <label>Gender *</label>
              <div class="radio-group">
                <div class="radio-item" *ngFor="let option of genderOptions">
                  <input
                    type="radio"
                    [id]="option.value"
                    name="gender"
                    [value]="option.value"
                    [(ngModel)]="user.gender"
                    required
                    #gender="ngModel"
                  >
                  <label [for]="option.value">{{ option.label }}</label>
                </div>
              </div>
              <div class="invalid-feedback" *ngIf="hasError('gender')">
                {{ getErrorMessage('gender') }}
              </div>
            </div>
          </div>

          <!-- 10. Grouping form controls -->
          <div class="form-section">
            <h4>Address Information</h4>
            <div class="address-group">
              <div class="form-group">
                <label for="street">Street Address</label>
                <input
                  type="text"
                  id="street"
                  name="street"
                  [(ngModel)]="user.address.street"
                  class="form-control"
                >
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="city">City</label>
                  <input
                    type="text"
                    id="city"
                    name="city"
                    [(ngModel)]="user.address.city"
                    class="form-control"
                  >
                </div>

                <div class="form-group">
                  <label for="zipCode">Zip Code</label>
                  <input
                    type="text"
                    id="zipCode"
                    name="zipCode"
                    [(ngModel)]="user.address.zipCode"
                    pattern="[0-9]{5}"
                    placeholder="12345"
                    class="form-control"
                  >
                </div>
              </div>
            </div>
          </div>

          <!-- Interests Checkboxes -->
          <div class="form-section">
            <h4>Interests</h4>
            <div class="checkbox-group">
              <div class="checkbox-item" *ngFor="let option of interestOptions">
                                 <input
                   type="checkbox"
                   [id]="'interest-' + option.value"
                   [value]="option.value"
                   [checked]="isInterestSelected(option.value)"
                   (change)="onInterestChange(option.value, $event)"
                 >
                <label [for]="'interest-' + option.value">{{ option.label }}</label>
              </div>
            </div>
          </div>

          <!-- Checkboxes -->
          <div class="form-section">
            <h4>Preferences</h4>
            <div class="checkbox-group">
              <div class="checkbox-item">
                <input
                  type="checkbox"
                  id="newsletter"
                  name="newsletter"
                  [(ngModel)]="user.newsletter"
                >
                <label for="newsletter">Subscribe to newsletter</label>
              </div>

              <div class="checkbox-item">
                <input
                  type="checkbox"
                  id="terms"
                  name="terms"
                  [(ngModel)]="user.terms"
                  required
                  #terms="ngModel"
                >
                <label for="terms">I agree to the terms and conditions *</label>
                <div class="invalid-feedback" *ngIf="hasError('terms')">
                  {{ getErrorMessage('terms') }}
                </div>
              </div>
            </div>
          </div>

          <!-- Form Actions -->
          <div class="form-actions">
            <button type="submit" class="btn btn-primary" [disabled]="userForm.invalid">
              Submit Form
            </button>
            <button type="button" class="btn btn-secondary" (click)="resetForm()">
              Reset Form
            </button>
            <button type="button" class="btn btn-info" (click)="setDefaultValues()">
              Set Default Values
            </button>
            <button type="button" class="btn btn-warning" (click)="patchValues()">
              Patch Values
            </button>
            <button type="button" class="btn btn-success" (click)="getFormData()">
              Get Form Data
            </button>
          </div>
        </form>
      </div>

      <!-- Form State Display -->
      <div class="form-state">
        <h4>Form State Information</h4>
        <div class="state-grid">
          <div class="state-item">
            <strong>Valid:</strong> {{ userForm.valid }}
          </div>
          <div class="state-item">
            <strong>Invalid:</strong> {{ userForm.invalid }}
          </div>
          <div class="state-item">
            <strong>Pristine:</strong> {{ userForm.pristine }}
          </div>
          <div class="state-item">
            <strong>Dirty:</strong> {{ userForm.dirty }}
          </div>
          <div class="state-item">
            <strong>Touched:</strong> {{ userForm.touched }}
          </div>
          <div class="state-item">
            <strong>Untouched:</strong> {{ userForm.untouched }}
          </div>
          <div class="state-item">
            <strong>Submitted:</strong> {{ userForm.submitted }}
          </div>
        </div>
      </div>

      <!-- Form Data Display -->
      <div class="form-data">
        <h4>Current Form Data</h4>
        <pre>{{ user | json }}</pre>
      </div>
    </section>

    <!-- Additional Examples -->
    <section class="section">
      <h2>Additional Examples</h2>

      <!-- Grouped Form Example -->
      <div class="example">
        <h3>Grouped Form with ngModelGroup</h3>
        <form #groupedForm="ngForm" class="grouped-form">
          <div ngModelGroup="personalInfo">
            <div class="form-group">
              <label for="groupFirstName">First Name</label>
              <input type="text" id="groupFirstName" name="firstName" ngModel class="form-control">
            </div>
            <div class="form-group">
              <label for="groupLastName">Last Name</label>
              <input type="text" id="groupLastName" name="lastName" ngModel class="form-control">
            </div>
          </div>

          <div ngModelGroup="contactInfo">
            <div class="form-group">
              <label for="groupEmail">Email</label>
              <input type="email" id="groupEmail" name="email" ngModel class="form-control">
            </div>
            <div class="form-group">
              <label for="groupPhone">Phone</label>
              <input type="tel" id="groupPhone" name="phone" ngModel class="form-control">
            </div>
          </div>
        </form>

        <div class="grouped-form-data">
          <h4>Grouped Form Data:</h4>
          <pre>{{ groupedForm.value | json }}</pre>
        </div>
      </div>
    </section>
  </div>
</div>
